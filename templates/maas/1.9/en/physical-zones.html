<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Physical Zones &mdash; MAAS dev documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/guidelines/css/latest/ubuntu-styles.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/ubuntu/latest/u/css/global.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/main.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/maas.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="MAAS dev documentation" href="index.html" />
    <link rel="next" title="MAAS API" href="api.html" />
    <link rel="prev" title="Making use of Tags" href="tags.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="api.html" title="MAAS API"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="tags.html" title="Making use of Tags"
             accesskey="P">previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://maas.io/docs/">Latest documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
  </li>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS dev documentation</a>
  </li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="physical-zones">
<h1>Physical Zones<a class="headerlink" href="physical-zones.html#physical-zones" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is only available in MAAS versions 1.5 and above.</p>
</div>
<p>To help you maximise fault-tolerance and performance of the services you
deploy, MAAS administrators can define <em>physical zones</em> (or just <em>zones</em>
for short), and assign nodes to them.  When a user requests a node, they can
ask for one that is in a specific zone, or one that is not in a specific zone.</p>
<p>It&#8217;s up to you as an administrator to decide what a physical zone should
represent: it could be a server rack, a room, a data centre, machines attached
to the same UPS, or a portion of your network.  Zones are most useful when they
represent portions of your infrastructure.  But you could also use them simply
to keep track of where your systems are located.</p>
<p>Each node is in one and only one physical zone.  Each MAAS instance ships with
a default zone to which nodes are attached by default.  If you do not
need this feature, you can simply pretend it does not exist.</p>
<div class="section" id="applications">
<h2>Applications<a class="headerlink" href="physical-zones.html#applications" title="Permalink to this headline">¶</a></h2>
<p>Since you run your own MAAS, its physical zones give you more flexibility
than those of a third-party hosted cloud service.  That means that you get to
design your zones and define what they mean.  Below are some examples of how
physical zones can help you get the most out of your MAAS.</p>
<div class="section" id="using-zones-for-fault-tolerance">
<h3>Using Zones for Fault Tolerance<a class="headerlink" href="physical-zones.html#using-zones-for-fault-tolerance" title="Permalink to this headline">¶</a></h3>
<p>If you are concerned about availability of services you deploy through MAAS, a
physical zone could be on one power supply, or it could be an entire data
centre location, or an area of your network that is unlikely to suffer problems
when another zone experiences an outage.</p>
<p>For example, you might roll out separate instances of the same web application
into different physical zones of the same MAAS, and either load-balance
between them or keep one as a warm stand-by.  If one zone suffers a power loss,
is cut off from the internet, or is affected by a natural disaster, the other
instance of your application may still be available in the other zone, and
ready to take over.</p>
<p>For fault tolerance, machines that work together in order to provide one
instance of a service should generally be allocated in the same zone.  The
entire service should have a backup instance in another zone.</p>
</div>
<div class="section" id="using-zones-for-performance">
<h3>Using Zones for Performance<a class="headerlink" href="physical-zones.html#using-zones-for-performance" title="Permalink to this headline">¶</a></h3>
<p>Even if fault tolerance is not an issue, you may still want to divide your
nodes into groups that communicate efficiently through a high-performance local
network, or share efficient access to external resources.</p>
<p>When it comes to performance, machines should generally be allocated in the
zone closest to performance-critical resources they need.</p>
<p>For example, for applications that are highly sensitive to network latency, it
may make sense to divide your MAAS into smaller physical networks, and
represent each of those networks as a physical zone.  Now, you can use the
physical zones to allocate nodes just where they get the best performance
when communicating with specific other nodes.</p>
<p>In another example, your application may rely on a third-party service
available on the internet.  If your MAAS is spread out across multiple data
centre locations, you may want the application to be deployed in the location
with the best access to that service.</p>
</div>
<div class="section" id="using-zones-for-power-management">
<h3>Using Zones for Power Management<a class="headerlink" href="physical-zones.html#using-zones-for-power-management" title="Permalink to this headline">¶</a></h3>
<p>If you are concerned about power density and cooling, you can lay out your
physical zones to match server racks.  Instead of allocating machines that
share a physical zone, you can spread out the load by ensuring that &#8220;hot&#8221;
systems are in located different zones.</p>
</div>
</div>
<div class="section" id="creating-a-zone">
<h2>Creating a Zone<a class="headerlink" href="physical-zones.html#creating-a-zone" title="Permalink to this headline">¶</a></h2>
<p>Only administrators can create and manage zones.  To create a physical
zone in the web user interface, log in as an administrator and browse to the
&#8220;Zones&#8221; section in the top bar.  This will takes you to the zones listing page.
At the bottom of the page is a button for creating a new zone:</p>
<img alt="_images/add-zone.png" src="_images/add-zone.png" />
<p>Or to do it in the <a class="reference internal" href="api.html#region-controller-api"><span>region-controller API</span></a>, POST
your zone definition to the <em>&#8220;zones&#8221;</em> endpoint.</p>
</div>
<div class="section" id="assigning-nodes-to-a-zone">
<h2>Assigning Nodes to a Zone<a class="headerlink" href="physical-zones.html#assigning-nodes-to-a-zone" title="Permalink to this headline">¶</a></h2>
<p>Once you have created one or more physical zones, you can set nodes&#8217; zones
from the nodes listing page in the UI.  Select the nodes for which you wish to
set a zone, and choose &#8220;Set physical zone&#8221; from the &#8220;Bulk action&#8221; dropdown
list near the top.  A second dropdown list will appear, to let you select which
zone you wish to set.  Leave it blank to clear nodes&#8217; physical zones.
Clicking &#8220;Go&#8221; will apply the change to the selected nodes.</p>
<p>You can also set an individual node&#8217;s zone on its &#8220;Edit node&#8221; page.  Both ways
are available in the API as well: edit an individual node through a <code class="docutils literal"><span class="pre">PUT</span></code>
request to the node&#8217;s URI, or set the zone on multiple nodes at once by calling
the <code class="docutils literal"><span class="pre">set_zone</span></code> operation on the <code class="docutils literal"><span class="pre">nodes</span></code> endpoint.</p>
</div>
<div class="section" id="allocating-a-node-in-a-zone">
<h2>Allocating a Node in a Zone<a class="headerlink" href="physical-zones.html#allocating-a-node-in-a-zone" title="Permalink to this headline">¶</a></h2>
<p>To deploy in a particular zone, call the <code class="docutils literal"><span class="pre">acquire</span></code> method in the
<a class="reference internal" href="api.html#region-controller-api"><span>region-controller API</span></a> as before, but pass the
<code class="docutils literal"><span class="pre">zone</span></code> parameter with the name of the zone.  The method will allocate a node
in that zone, or fail with an HTTP 409 (&#8220;conflict&#8221;) error if the zone has no
nodes available that match your request.</p>
<p>Alternatively, you may want to request a node that is <em>not</em> in a particular
zone, or one that is not in any of several zones.  To do that, specify the
<code class="docutils literal"><span class="pre">not_in_zone</span></code> parameter to <code class="docutils literal"><span class="pre">acquire</span></code>.  This parameter takes a list of zone
names; the allocated node will not be in any of them.  Again, if that leaves no
nodes available that match your request, the call will return a &#8220;conflict&#8221;
error.</p>
<p>It is possible, though not usually useful, to combine the <code class="docutils literal"><span class="pre">zone</span></code> and
<code class="docutils literal"><span class="pre">not_in_zone</span></code> parameters.   If your choice for <code class="docutils literal"><span class="pre">zone</span></code> is also present in
<code class="docutils literal"><span class="pre">not_in_zone</span></code>, no node will ever match your request.  Or if it&#8217;s not, then
the <code class="docutils literal"><span class="pre">not_in_zone</span></code> values will not affect the result of the call at all.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<a style="border:0" title="MAAS Documentation Homepage" href="index.html"><img src="_static/maas-logo-200.png" alt="MAAS logo"/></a>
<h2 style="text-align:center;">MAAS</h2>
<p style="font-style:italic;font-size:0.9em; text-align:center; margin-bottom:1.5em">Metal As A Service.</p>
<span id="version_switcher"></span>
<br/>
<br/>

  <ul>
<li><a class="reference internal" href="physical-zones.html#">Physical Zones</a><ul>
<li><a class="reference internal" href="physical-zones.html#applications">Applications</a><ul>
<li><a class="reference internal" href="physical-zones.html#using-zones-for-fault-tolerance">Using Zones for Fault Tolerance</a></li>
<li><a class="reference internal" href="physical-zones.html#using-zones-for-performance">Using Zones for Performance</a></li>
<li><a class="reference internal" href="physical-zones.html#using-zones-for-power-management">Using Zones for Power Management</a></li>
</ul>
</li>
<li><a class="reference internal" href="physical-zones.html#creating-a-zone">Creating a Zone</a></li>
<li><a class="reference internal" href="physical-zones.html#assigning-nodes-to-a-zone">Assigning Nodes to a Zone</a></li>
<li><a class="reference internal" href="physical-zones.html#allocating-a-node-in-a-zone">Allocating a Node in a Zone</a></li>
</ul>
</li>
</ul>
<script type="text/javascript">
$(document).ready(function () {
  if (true) {
    $.ajaxSetup({cache: true});
    $.getScript('/docs/_static/versions.js', function() {
      console.log( "Versions script loaded." );
      set_up_version_switcher('#version_switcher', 'docs');
    });
}
});
</script>

<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tags.html" title="previous chapter">Making use of Tags</a></li>
      <li>Next: <a href="api.html" title="next chapter">MAAS API</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/physical-zones.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="api.html" title="MAAS API"
             >next</a></li>
        <li class="right" >
          <a href="tags.html" title="Making use of Tags"
             >previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://maas.io/docs/">Latest documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
  </li>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS dev documentation</a>
  </li>
 
      </ul>
    </div>
<footer class="global clearfix">
  <div class="legal clearfix">
    <p>&copy; Copyright 2012-2015, MAAS Developers. Ubuntu and Canonical are registered trademarks of
      <a href="http://canonical.com">Canonical Ltd</a>.
    </p>
    <p>
      Revision 4595
 (2016-08-24 14:59:26 +0000).
      Documentation generation date: 2016-08-24 16:22:23 +0100.
    </p>
  </div>
</footer>
  </body>
</html>